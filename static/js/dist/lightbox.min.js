var baguetteBox=function(){var i,a,s,r,t,n,l='<svg width="40" height="60" xmlns="http://www.w3.org/2000/svg" version="1.1"><polyline points="30 10 10 30 30 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round">&lt;</polyline></svg>',c='<svg width="40" height="60" xmlns="http://www.w3.org/2000/svg" version="1.1"><polyline points="10 10 30 30 10 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round">&gt;</polyline></svg>',u='<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" version="1.1"><g stroke="rgb(160, 160, 160)" stroke-width="4"><line x1="5" y1="5" x2="25" y2="25"/><line x1="5" y1="25" x2="25" y2="5"/>X</g></svg>',d="baguetteBox-overlay",m="baguetteBox-slider",p={},f={captions:!0,buttons:"auto",async:!1,preload:2,animation:"slideIn"},g=0,y=-1,h=!1,v=[],b=[],E=[];function k(){var e=document.createElement("div");return e.className="full-image",e}function w(){"none"!==i.style.display&&(i.className="",setTimeout(function(){i.style.display="none"},500))}function B(e,t){var n=E[e];if(void 0!==n)if(n.getElementsByTagName("img")[0])t&&t();else{imageElement=b[y][e],imageCaption=imageElement.getAttribute("data-caption")||imageElement.title,imageSrc=function(e){var t=imageElement.getAttribute("href");if(e.dataset){var n=[];for(var o in e.dataset)"at-"!==o.substring(0,3)||isNaN(o.substring(3))||(n[o.replace("at-","")]=e.dataset[o]);keys=Object.keys(n).sort(function(e,t){return parseInt(e)<parseInt(t)?-1:1});for(var i=window.innerWidth*window.devicePixelRatio,a=0;a<keys.length;a++){if(keys[a]>=i){t=n[keys[a]];break}t=n[keys[a]]}}return t}(imageElement);var o=document.createElement("figure"),i=document.createElement("img"),a=document.createElement("figcaption");n.appendChild(o),o.innerHTML='<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>',i.onload=function(){var e=this.parentNode.querySelector(".spinner");this.parentNode.removeChild(e),!p.async&&t&&t()},i.setAttribute("src",imageSrc),o.appendChild(i),p.captions&&imageCaption&&(a.innerHTML=imageCaption,o.appendChild(a)),p.async&&t&&t()}}function C(){g<=E.length-2?(g++,T(),x(g)):(a.className="bounce-from-right",setTimeout(function(){a.className=""},400))}function N(){1<=g?(g--,T(),I(g)):(a.className="bounce-from-left",setTimeout(function(){a.className=""},400))}function T(){var e=100*-g+"%";"fadeIn"===p.animation?(a.style.opacity=0,setTimeout(function(){p.transforms?a.style.transform=a.style.webkitTransform="translate3d("+e+",0,0)":a.style.left=e,a.style.opacity=1},400)):p.transforms?a.style.transform=a.style.webkitTransform="translate3d("+e+",0,0)":a.style.left=e}function x(e){e-g>=p.preload||B(e+1,function(){x(e+1)})}function I(e){g-e>=p.preload||B(e-1,function(){I(e-1)})}function P(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}return Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length,o=0;o<n;o++)e.call(t,this[o],o,this)}),{run:function(e,o){!function(){if(i=document.getElementById(d))return a=document.getElementById(m),s=document.getElementById("previous-button"),r=document.getElementById("next-button"),t=document.getElementById("close-button");(i=document.createElement("div")).id=d,document.getElementsByTagName("body")[0].appendChild(i),(a=document.createElement("div")).id=m,i.appendChild(a),(s=document.createElement("button")).id="previous-button",s.innerHTML=l,i.appendChild(s),(r=document.createElement("button")).id="next-button",r.innerHTML=c,i.appendChild(r),(t=document.createElement("button")).id="close-button",t.innerHTML=u,i.appendChild(t),s.className=r.className=t.className="baguetteBox-button",P(i,"click",function(e){e.target&&"IMG"!==e.target.nodeName&&w()}),P(document.getElementById("previous-button"),"click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,N()}),P(document.getElementById("next-button"),"click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,C()}),P(document.getElementById("close-button"),"click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,w()}),P(i,"touchstart",function(e){n=e.changedTouches[0].pageX}),P(i,"touchmove",function(e){h||(e.preventDefault?e.preventDefault():e.returnValue=!1,touch=e.touches[0]||e.changedTouches[0],40<touch.pageX-n?(h=!0,N()):touch.pageX-n<-40&&(h=!0,C()))}),P(i,"touchend",function(e){h=!1}),P(document,"keydown",function(e){switch(e.keyCode){case 37:N();break;case 39:C();break;case 27:w()}})}(),v=document.querySelectorAll(e),[].forEach.call(v,function(e,t){var n=b.length;b.push(e.getElementsByClassName("show-pic")),b[n].options=o,[].forEach.call(b[n],function(e,t){P(e,"click",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,function(e){if(y===e)return;!function(e){e=e||{};for(var t in f)p[t]=f[t],void 0!==e[t]&&(p[t]=e[t]);a.style.transition=a.style.webkitTransition="fadeIn"===p.animation?"opacity .4s ease":"","auto"===p.buttons&&("ontouchstart"in window||1===b[y].length)&&(p.buttons=!1);s.style.display=r.style.display=p.buttons?"":"none"}(b[y=e].options);for(;a.firstChild;)a.removeChild(a.firstChild);for(var t=E.length=0;t<b[e].length;t++)E.push(k()),a.appendChild(E[t])}(n),function(e){if("block"===i.style.display)return;B(g=e,function(){x(g),I(g)}),T(),i.style.display="block",setTimeout(function(){i.className="visible"},50)}(t)})})}),f.transforms=function(){var e=document.createElement("div");return void 0!==e.style.perspective||void 0!==e.style.webkitPerspective}()}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpZ2h0Ym94LmpzIl0sIm5hbWVzIjpbImJhZ3VldHRlQm94Iiwib3ZlcmxheSIsInNsaWRlciIsInByZXZpb3VzQnV0dG9uIiwibmV4dEJ1dHRvbiIsImNsb3NlQnV0dG9uIiwidG91Y2hTdGFydFgiLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwiY2xvc2VYIiwib3ZlcmxheUlEIiwic2xpZGVySUQiLCJvcHRpb25zIiwiZGVmYXVsdHMiLCJjYXB0aW9ucyIsImJ1dHRvbnMiLCJhc3luYyIsInByZWxvYWQiLCJhbmltYXRpb24iLCJjdXJyZW50SW5kZXgiLCJjdXJyZW50R2FsbGVyeSIsInRvdWNoRmxhZyIsImdhbGxlcmllcyIsImltYWdlc01hcCIsImltYWdlc0FycmF5IiwicmV0dXJuSW1hZ2VDb250YWluZXIiLCJmdWxsSW1hZ2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJoaWRlT3ZlcmxheSIsInN0eWxlIiwiZGlzcGxheSIsInNldFRpbWVvdXQiLCJsb2FkSW1hZ2UiLCJpbmRleCIsImNhbGxiYWNrIiwiaW1hZ2VDb250YWluZXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImltYWdlRWxlbWVudCIsImltYWdlQ2FwdGlvbiIsImdldEF0dHJpYnV0ZSIsInRpdGxlIiwiaW1hZ2VTcmMiLCJpbWFnZSIsInJlc3VsdCIsImRhdGFzZXQiLCJzcmNzIiwiaXRlbSIsInN1YnN0cmluZyIsImlzTmFOIiwicmVwbGFjZSIsImtleXMiLCJPYmplY3QiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRldmljZVBpeGVsUmF0aW8iLCJpIiwibGVuZ3RoIiwiZ2V0SW1hZ2VTcmMiLCJmaWd1cmUiLCJmaWdjYXB0aW9uIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJvbmxvYWQiLCJzcGlubmVyIiwidGhpcyIsInBhcmVudE5vZGUiLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlQ2hpbGQiLCJzZXRBdHRyaWJ1dGUiLCJzaG93TmV4dEltYWdlIiwidXBkYXRlT2Zmc2V0IiwicHJlbG9hZE5leHQiLCJzaG93UHJldmlvdXNJbWFnZSIsInByZWxvYWRQcmV2Iiwib2Zmc2V0Iiwib3BhY2l0eSIsInRyYW5zZm9ybXMiLCJ0cmFuc2Zvcm0iLCJ3ZWJraXRUcmFuc2Zvcm0iLCJsZWZ0IiwiYmluZCIsImVsZW1lbnQiLCJldmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsInRoaXNBcmciLCJsZW4iLCJjYWxsIiwicnVuIiwic2VsZWN0b3IiLCJ1c2VyT3B0aW9ucyIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ0YXJnZXQiLCJub2RlTmFtZSIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsImNoYW5nZWRUb3VjaGVzIiwicGFnZVgiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwidG91Y2giLCJ0b3VjaGVzIiwia2V5Q29kZSIsImJ1aWxkT3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnYWxsZXJ5RWxlbWVudCIsImdhbGxlcnlJbmRleCIsImdhbGxlcnlJRCIsInB1c2giLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaW1hZ2VJbmRleCIsIm5ld09wdGlvbnMiLCJ0cmFuc2l0aW9uIiwid2Via2l0VHJhbnNpdGlvbiIsInNldE9wdGlvbnMiLCJmaXJzdENoaWxkIiwicHJlcGFyZU92ZXJsYXkiLCJzaG93T3ZlcmxheSIsImRpdiIsInBlcnNwZWN0aXZlIiwid2Via2l0UGVyc3BlY3RpdmUiLCJ0ZXN0VHJhbnNmb3Jtc1N1cHBvcnQiXSwibWFwcGluZ3MiOiJBQU9BLElBQUlBLFlBQWMsV0FFZCxJQXlCSUMsRUFBU0MsRUFBUUMsRUFBZ0JDLEVBQVlDLEVBSTdDQyxFQTdCQUMsRUFBWSxtUEFJWkMsRUFBYSxtUEFJYkMsRUFBUyxxTkFNVEMsRUFBWSxzQkFDWkMsRUFBVyxxQkFF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QUFNQyxRQUFVcEIsRUFBUUcsUUFBVSxHQUFLLE9BM0JqRjhHLENBQVd0RyxFQUZYSCxFQUFpQmlHLEdBRWtCekcsU0FFbkMsS0FBTVYsRUFBTzRILFlBQ1Q1SCxFQUFPd0UsWUFBWXhFLEVBQU80SCxZQUc5QixJQUFJLElBQUloRSxFQUZSdEMsRUFBWXVDLE9BQVMsRUFFTkQsRUFBSXZDLEVBQVU4RixHQUFjdEQsT0FBUUQsSUFDL0N0QyxFQUFZK0YsS0FBSzlGLEtBQ2pCdkIsRUFBT2lFLFlBQVkzQyxFQUFZc0MsSUEzSGZpRSxDQUFlVCxHQXdKdkMsU0FBcUJuRixHQUVqQixHQUE2QixVQUExQmxDLEVBQVE4QixNQUFNQyxRQUNiLE9BR0pFLEVBREFmLEVBQWVnQixFQUNTLFdBQ3BCMkMsRUFBWTNELEdBQ1o2RCxFQUFZN0QsS0FFaEIwRCxJQUNBNUUsRUFBUThCLE1BQU1DLFFBQVUsUUFFeEJDLFdBQVcsV0FDUGhDLEVBQVE0QixVQUFZLFdBQ3JCLElBdEtpQm1HLENBQVlQLFNBTWhDNUcsRUFBU3NFLFdBcVNiLFdBQ0ksSUFBSThDLEVBQU10RyxTQUFTQyxjQUFjLE9BR2pDLFlBRDJDLElBQTFCcUcsRUFBSWxHLE1BQU1tRyxrQkFBc0UsSUFBaENELEVBQUlsRyxNQUFNb0csa0JBeFNyREMsS0EzRVoiLCJmaWxlIjoibGlnaHRib3gubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcbiAqIGJhZ3VldHRlQm94LmpzXHJcbiAqIEBhdXRob3IgIGZlaW1vc2lcclxuICogQHZlcnNpb24gMC43LjBcclxuICogQHVybCBodHRwczovL2dpdGh1Yi5jb20vZmVpbW9zaS9iYWd1ZXR0ZUJveC5qc1xyXG4gKi9cclxuXHJcbnZhciBiYWd1ZXR0ZUJveCA9IChmdW5jdGlvbigpIHtcclxuICAgIC8vIFNWRyBzaGFwZXMgdXNlZCBpbiBidXR0b25zXHJcbiAgICB2YXIgbGVmdEFycm93ID0gJzxzdmcgd2lkdGg9XCI0MFwiIGhlaWdodD1cIjYwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIj4nICtcclxuICAgICAgICAgICAgJzxwb2x5bGluZSBwb2ludHM9XCIzMCAxMCAxMCAzMCAzMCA1MFwiIHN0cm9rZT1cInJnYmEoMjU1LDI1NSwyNTUsMC41KVwiIHN0cm9rZS13aWR0aD1cIjRcIicgK1xyXG4gICAgICAgICAgICAgICdzdHJva2UtbGluZWNhcD1cImJ1dHRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+Jmx0OzwvcG9seWxpbmU+JyArXHJcbiAgICAgICAgICAgICc8L3N2Zz4nLFxyXG4gICAgICAgIHJpZ2h0QXJyb3cgPSAnPHN2ZyB3aWR0aD1cIjQwXCIgaGVpZ2h0PVwiNjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmVyc2lvbj1cIjEuMVwiPicgK1xyXG4gICAgICAgICAgICAnPHBvbHlsaW5lIHBvaW50cz1cIjEwIDEwIDMwIDMwIDEwIDUwXCIgc3Ryb2tlPVwicmdiYSgyNTUsMjU1LDI1NSwwLjUpXCIgc3Ryb2tlLXdpZHRoPVwiNFwiJyArXHJcbiAgICAgICAgICAgICAgJ3N0cm9rZS1saW5lY2FwPVwiYnV0dFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj4mZ3Q7PC9wb2x5bGluZT4nICtcclxuICAgICAgICAgICAgJzwvc3ZnPicsXHJcbiAgICAgICAgY2xvc2VYID0gJzxzdmcgd2lkdGg9XCIzMFwiIGhlaWdodD1cIjMwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIj4nICtcclxuICAgICAgICAgICAgJzxnIHN0cm9rZT1cInJnYigxNjAsIDE2MCwgMTYwKVwiIHN0cm9rZS13aWR0aD1cIjRcIj4nICtcclxuICAgICAgICAgICAgJzxsaW5lIHgxPVwiNVwiIHkxPVwiNVwiIHgyPVwiMjVcIiB5Mj1cIjI1XCIvPicgK1xyXG4gICAgICAgICAgICAnPGxpbmUgeDE9XCI1XCIgeTE9XCIyNVwiIHgyPVwiMjVcIiB5Mj1cIjVcIi8+JyArXHJcbiAgICAgICAgICAgICdYPC9nPjwvc3ZnPic7XHJcbiAgICAvLyBNYWluIElEIG5hbWVzXHJcbiAgICB2YXIgb3ZlcmxheUlEID0gJ2JhZ3VldHRlQm94LW92ZXJsYXknO1xyXG4gICAgdmFyIHNsaWRlcklEID0gJ2JhZ3VldHRlQm94LXNsaWRlcic7XHJcbiAgICAvLyBHbG9iYWwgb3B0aW9ucyBhbmQgdGhlaXIgZGVmYXVsdHNcclxuICAgIHZhciBvcHRpb25zID0ge30sIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIGNhcHRpb25zOiB0cnVlLFxyXG4gICAgICAgIGJ1dHRvbnM6ICdhdXRvJyxcclxuICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgcHJlbG9hZDogMixcclxuICAgICAgICBhbmltYXRpb246ICdzbGlkZUluJ1xyXG4gICAgfTtcclxuICAgIC8vIERPTSBFbGVtZW50cyByZWZlcmVuY2VzXHJcbiAgICB2YXIgb3ZlcmxheSwgc2xpZGVyLCBwcmV2aW91c0J1dHRvbiwgbmV4dEJ1dHRvbiwgY2xvc2VCdXR0b247XHJcbiAgICAvLyBDdXJyZW50IGltYWdlIGluZGV4IGluc2lkZSB0aGUgc2xpZGVyIGFuZCBkaXNwbGF5ZWQgZ2FsbGVyeSBpbmRleFxyXG4gICAgdmFyIGN1cnJlbnRJbmRleCA9IDAsIGN1cnJlbnRHYWxsZXJ5ID0gLTE7XHJcbiAgICAvLyBUb3VjaCBldmVudCBzdGFydCBwb3NpdGlvbiAoZm9yIHNsaWRlIGdlc3R1cmUpXHJcbiAgICB2YXIgdG91Y2hTdGFydFg7XHJcbiAgICAvLyBJZiBzZXQgdG8gdHJ1ZSBpZ25vcmUgdG91Y2ggZXZlbnRzIGJlY2F1c2UgYW5pbWF0aW9uIHdhcyBhbHJlYWR5IGZpcmVkXHJcbiAgICB2YXIgdG91Y2hGbGFnID0gZmFsc2U7XHJcbiAgICAvLyBBcnJheSBvZiBhbGwgdXNlZCBnYWxsZXJpZXMgKERPTSBlbGVtZW50cylcclxuICAgIHZhciBnYWxsZXJpZXMgPSBbXTtcclxuICAgIC8vIDJEIGFycmF5IG9mIGdhbGxlcmllcyBhbmQgaW1hZ2VzIGluc2lkZSB0aGVtXHJcbiAgICB2YXIgaW1hZ2VzTWFwID0gW107XHJcbiAgICAvLyBBcnJheSBjb250YWluaW5nIHRlbXBvcmFyeSBpbWFnZXMgRE9NIGVsZW1lbnRzXHJcbiAgICB2YXIgaW1hZ2VzQXJyYXkgPSBbXTtcclxuXHJcbiAgICAvLyBmb3JFYWNoIHBvbHlmaWxsIGZvciBJRThcclxuICAgIGlmKCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkge1xyXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpc1tpXSwgaSwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNjcmlwdCBlbnRyeSBwb2ludFxyXG4gICAgZnVuY3Rpb24gcnVuKHNlbGVjdG9yLCB1c2VyT3B0aW9ucykge1xyXG4gICAgICAgIGJ1aWxkT3ZlcmxheSgpO1xyXG4gICAgICAgIC8vIEZvciBlYWNoIGdhbGxlcnkgYmluZCBhIGNsaWNrIGV2ZW50IHRvIGV2ZXJ5IGltYWdlIGluc2lkZSBpdFxyXG4gICAgICAgIGdhbGxlcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIFtdLmZvckVhY2guY2FsbChcclxuICAgICAgICAgICAgZ2FsbGVyaWVzLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZ2FsbGVyeUVsZW1lbnQsIGdhbGxlcnlJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdhbGxlcnlJRCA9IGltYWdlc01hcC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpbWFnZXNNYXAucHVzaChnYWxsZXJ5RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaG93LXBpYycpKTtcclxuICAgICAgICAgICAgICAgIGltYWdlc01hcFtnYWxsZXJ5SURdLm9wdGlvbnMgPSB1c2VyT3B0aW9ucztcclxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZXNNYXBbZ2FsbGVyeUlEXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoaW1hZ2VFbGVtZW50LCBpbWFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmQoaW1hZ2VFbGVtZW50LCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypqc2hpbnQgLVcwMzAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID8gZXZlbnQucHJldmVudERlZmF1bHQoKSA6IGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVwYXJlT3ZlcmxheShnYWxsZXJ5SUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd092ZXJsYXkoaW1hZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGRlZmF1bHRzLnRyYW5zZm9ybXMgPSB0ZXN0VHJhbnNmb3Jtc1N1cHBvcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBidWlsZE92ZXJsYXkoKSB7XHJcbiAgICAgICAgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG92ZXJsYXlJRCk7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG92ZXJsYXkgYWxyZWFkeSBleGlzdHNcclxuICAgICAgICBpZihvdmVybGF5KSB7XHJcbiAgICAgICAgICAgIHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNsaWRlcklEKTtcclxuICAgICAgICAgICAgcHJldmlvdXNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlvdXMtYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIG5leHRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV4dC1idXR0b24nKTtcclxuICAgICAgICAgICAgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3JlYXRlIG92ZXJsYXkgZWxlbWVudFxyXG4gICAgICAgIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBvdmVybGF5LmlkID0gb3ZlcmxheUlEO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGdhbGxlcnkgc2xpZGVyIGVsZW1lbnRcclxuICAgICAgICBzbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzbGlkZXIuaWQgPSBzbGlkZXJJRDtcclxuICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKHNsaWRlcik7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGFsbCBuZWNlc3NhcnkgYnV0dG9uc1xyXG4gICAgICAgIHByZXZpb3VzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgcHJldmlvdXNCdXR0b24uaWQgPSAncHJldmlvdXMtYnV0dG9uJztcclxuICAgICAgICBwcmV2aW91c0J1dHRvbi5pbm5lckhUTUwgPSBsZWZ0QXJyb3c7XHJcbiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChwcmV2aW91c0J1dHRvbik7XHJcblxyXG4gICAgICAgIG5leHRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBuZXh0QnV0dG9uLmlkID0gJ25leHQtYnV0dG9uJztcclxuICAgICAgICBuZXh0QnV0dG9uLmlubmVySFRNTCA9IHJpZ2h0QXJyb3c7XHJcbiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChuZXh0QnV0dG9uKTtcclxuXHJcbiAgICAgICAgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5pZCA9ICdjbG9zZS1idXR0b24nO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmlubmVySFRNTCA9IGNsb3NlWDtcclxuICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgcHJldmlvdXNCdXR0b24uY2xhc3NOYW1lID0gbmV4dEJ1dHRvbi5jbGFzc05hbWUgPSBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSAnYmFndWV0dGVCb3gtYnV0dG9uJztcclxuXHJcbiAgICAgICAgYmluZEV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgLy8gV2hlbiBjbGlja2VkIG9uIHRoZSBvdmVybGF5IChvdXRzaWRlIGRpc3BsYXllZCBpbWFnZSkgY2xvc2UgaXRcclxuICAgICAgICBiaW5kKG92ZXJsYXksICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQubm9kZU5hbWUgIT09IFwiSU1HXCIpXHJcbiAgICAgICAgICAgICAgICBoaWRlT3ZlcmxheSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lcnMgZm9yIGJ1dHRvbnNcclxuICAgICAgICBiaW5kKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aW91cy1idXR0b24nKSwgJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgLypqc2hpbnQgLVcwMzAgKi9cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uID8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkgOiBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBzaG93UHJldmlvdXNJbWFnZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJpbmQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25leHQtYnV0dG9uJyksICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8qanNoaW50IC1XMDMwICovXHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA/IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIDogZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2hvd05leHRJbWFnZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJpbmQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWJ1dHRvbicpLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAvKmpzaGludCAtVzAzMCAqL1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24gPyBldmVudC5zdG9wUHJvcGFnYXRpb24oKSA6IGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGhpZGVPdmVybGF5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQWRkIHRvdWNoIGV2ZW50c1xyXG4gICAgICAgIGJpbmQob3ZlcmxheSwgJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAvLyBTYXZlIHggYXhpcyBwb3NpdGlvblxyXG4gICAgICAgICAgICB0b3VjaFN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJpbmQob3ZlcmxheSwgJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKHRvdWNoRmxhZylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgLypqc2hpbnQgLVcwMzAgKi9cclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQgPyBldmVudC5wcmV2ZW50RGVmYXVsdCgpIDogZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdG91Y2ggPSBldmVudC50b3VjaGVzWzBdIHx8IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgICAgICAgICBpZih0b3VjaC5wYWdlWCAtIHRvdWNoU3RhcnRYID4gNDApIHtcclxuICAgICAgICAgICAgICAgIHRvdWNoRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzaG93UHJldmlvdXNJbWFnZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRvdWNoLnBhZ2VYIC0gdG91Y2hTdGFydFggPCAtNDApIHtcclxuICAgICAgICAgICAgICAgIHRvdWNoRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzaG93TmV4dEltYWdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBiaW5kKG92ZXJsYXksICd0b3VjaGVuZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRvdWNoRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEFjdGl2YXRlIGtleWJvYXJkIHNob3J0Y3V0c1xyXG4gICAgICAgIGJpbmQoZG9jdW1lbnQsICdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgc3dpdGNoKGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6IC8vIExlZnQgYXJyb3dcclxuICAgICAgICAgICAgICAgICAgICBzaG93UHJldmlvdXNJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTogLy8gUmlnaHQgYXJyb3dcclxuICAgICAgICAgICAgICAgICAgICBzaG93TmV4dEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OiAvLyBFc2NcclxuICAgICAgICAgICAgICAgICAgICBoaWRlT3ZlcmxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlcGFyZU92ZXJsYXkoZ2FsbGVyeUluZGV4KSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIHNhbWUgZ2FsbGVyeSBpcyBiZWluZyBvcGVuZWQgcHJldmVudCBmcm9tIGxvYWRpbmcgaXQgb25jZSBhZ2FpblxyXG4gICAgICAgIGlmKGN1cnJlbnRHYWxsZXJ5ID09PSBnYWxsZXJ5SW5kZXgpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjdXJyZW50R2FsbGVyeSA9IGdhbGxlcnlJbmRleDtcclxuICAgICAgICAvLyBVcGRhdGUgZ2FsbGVyeSBzcGVjaWZpYyBvcHRpb25zXHJcbiAgICAgICAgc2V0T3B0aW9ucyhpbWFnZXNNYXBbZ2FsbGVyeUluZGV4XS5vcHRpb25zKTtcclxuICAgICAgICAvLyBFbXB0eSBzbGlkZXIgb2YgcHJldmlvdXMgY29udGVudHMgKG1vcmUgZWZmZWN0aXZlIHRoYW4gLmlubmVySFRNTCA9IFwiXCIpXHJcbiAgICAgICAgd2hpbGUoc2xpZGVyLmZpcnN0Q2hpbGQpXHJcbiAgICAgICAgICAgIHNsaWRlci5yZW1vdmVDaGlsZChzbGlkZXIuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgaW1hZ2VzQXJyYXkubGVuZ3RoID0gMDtcclxuICAgICAgICAvLyBQcmVwYXJlIGFuZCBhcHBlbmQgaW1hZ2VzIGNvbnRhaW5lcnNcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaW1hZ2VzTWFwW2dhbGxlcnlJbmRleF0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaW1hZ2VzQXJyYXkucHVzaChyZXR1cm5JbWFnZUNvbnRhaW5lcigpKTtcclxuICAgICAgICAgICAgc2xpZGVyLmFwcGVuZENoaWxkKGltYWdlc0FycmF5W2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0T3B0aW9ucyhuZXdPcHRpb25zKSB7XHJcbiAgICAgICAgaWYoIW5ld09wdGlvbnMpXHJcbiAgICAgICAgICAgIG5ld09wdGlvbnMgPSB7fTtcclxuICAgICAgICBmb3IodmFyIGl0ZW0gaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgb3B0aW9uc1tpdGVtXSA9IGRlZmF1bHRzW2l0ZW1dO1xyXG4gICAgICAgICAgICBpZih0eXBlb2YgbmV3T3B0aW9uc1tpdGVtXSAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zW2l0ZW1dID0gbmV3T3B0aW9uc1tpdGVtXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogQXBwbHkgbmV3IG9wdGlvbnMgKi9cclxuICAgICAgICAvLyBDaGFuZ2UgdHJhbnNpdGlvbiBmb3IgcHJvcGVyIGFuaW1hdGlvblxyXG4gICAgICAgIHNsaWRlci5zdHlsZS50cmFuc2l0aW9uID0gc2xpZGVyLnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSBvcHRpb25zLmFuaW1hdGlvbiA9PT0gJ2ZhZGVJbicgPyAnb3BhY2l0eSAuNHMgZWFzZScgOiAnJztcclxuICAgICAgICAvLyBIaWRlIGJ1dHRvbnMgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgaWYob3B0aW9ucy5idXR0b25zID09PSAnYXV0bycgJiYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBpbWFnZXNNYXBbY3VycmVudEdhbGxlcnldLmxlbmd0aCA9PT0gMSkpXHJcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIFNldCBidXR0b25zIHN0eWxlIHRvIGhpZGUgb3IgZGlzcGxheSB0aGVtXHJcbiAgICAgICAgcHJldmlvdXNCdXR0b24uc3R5bGUuZGlzcGxheSA9IG5leHRCdXR0b24uc3R5bGUuZGlzcGxheSA9IG9wdGlvbnMuYnV0dG9ucyA/ICcnIDogJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiBET00gZWxlbWVudCBmb3IgaW1hZ2UgY29udGFpbmVyIDxkaXYgY2xhc3M9XCJmdWxsLWltYWdlXCI+Li4uPC9kaXY+XHJcbiAgICBmdW5jdGlvbiByZXR1cm5JbWFnZUNvbnRhaW5lcigpIHtcclxuICAgICAgICB2YXIgZnVsbEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZnVsbEltYWdlLmNsYXNzTmFtZSA9ICdmdWxsLWltYWdlJztcclxuICAgICAgICByZXR1cm4gZnVsbEltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dPdmVybGF5KGluZGV4KSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGlmIG92ZXJsYXkgaXMgYWxyZWFkeSB2aXNpYmxlXHJcbiAgICAgICAgaWYob3ZlcmxheS5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gU2V0IGN1cnJlbnQgaW5kZXggdG8gYSBuZXcgdmFsdWUgYW5kIHNob3cgcHJvcGVyIGltYWdlXHJcbiAgICAgICAgY3VycmVudEluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgbG9hZEltYWdlKGN1cnJlbnRJbmRleCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHByZWxvYWROZXh0KGN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICAgIHByZWxvYWRQcmV2KGN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdXBkYXRlT2Zmc2V0KCk7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAvLyBGYWRlIGluIG92ZXJsYXlcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICd2aXNpYmxlJztcclxuICAgICAgICB9LCA1MCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGlkZU92ZXJsYXkoKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGlmIG92ZXJsYXkgaXMgYWxyZWFkeSBoaWRkZW5cclxuICAgICAgICBpZihvdmVybGF5LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIEZhZGUgb3V0IGFuZCBoaWRlIHRoZSBvdmVybGF5XHJcbiAgICAgICAgb3ZlcmxheS5jbGFzc05hbWUgPSAnJztcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkSW1hZ2UoaW5kZXgsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGltYWdlQ29udGFpbmVyID0gaW1hZ2VzQXJyYXlbaW5kZXhdO1xyXG4gICAgICAgIC8vIElmIGluZGV4IGlzIGludmFsaWQgcmV0dXJuXHJcbiAgICAgICAgaWYodHlwZW9mIGltYWdlQ29udGFpbmVyID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIElmIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkIHJ1biBjYWxsYmFjayBhbmQgcmV0dXJuXHJcbiAgICAgICAgaWYoaW1hZ2VDb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpWzBdKSB7XHJcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBHZXQgZWxlbWVudCByZWZlcmVuY2UsIG9wdGlvbmFsIGNhcHRpb24gYW5kIHNvdXJjZSBwYXRoXHJcbiAgICAgICAgaW1hZ2VFbGVtZW50ID0gaW1hZ2VzTWFwW2N1cnJlbnRHYWxsZXJ5XVtpbmRleF07XHJcbiAgICAgICAgaW1hZ2VDYXB0aW9uID0gaW1hZ2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXB0aW9uJykgfHwgaW1hZ2VFbGVtZW50LnRpdGxlO1xyXG4gICAgICAgIGltYWdlU3JjID0gZ2V0SW1hZ2VTcmMoaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICAvLyBQcmVwYXJlIGltYWdlIGNvbnRhaW5lciBlbGVtZW50c1xyXG4gICAgICAgIHZhciBmaWd1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWd1cmUnKTtcclxuICAgICAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICB2YXIgZmlnY2FwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZ2NhcHRpb24nKTtcclxuICAgICAgICBpbWFnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmaWd1cmUpO1xyXG4gICAgICAgIC8vIEFkZCBsb2FkZXIgZWxlbWVudFxyXG4gICAgICAgIGZpZ3VyZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNwaW5uZXJcIj4nICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkb3VibGUtYm91bmNlMVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRvdWJsZS1ib3VuY2UyXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIC8vIFNldCBjYWxsYmFjayBmdW5jdGlvbiB3aGVuIGltYWdlIGxvYWRzXHJcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBsb2FkZXIgZWxlbWVudFxyXG4gICAgICAgICAgICB2YXIgc3Bpbm5lciA9IHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3Bpbm5lcik7XHJcbiAgICAgICAgICAgIGlmKCFvcHRpb25zLmFzeW5jICYmIGNhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1hZ2VTcmMpO1xyXG4gICAgICAgIGZpZ3VyZS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgICAgICAgLy8gSW5zZXJ0IGNhcHRpb24gaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYob3B0aW9ucy5jYXB0aW9ucyAmJiBpbWFnZUNhcHRpb24pIHtcclxuICAgICAgICAgICAgZmlnY2FwdGlvbi5pbm5lckhUTUwgPSBpbWFnZUNhcHRpb247XHJcbiAgICAgICAgICAgIGZpZ3VyZS5hcHBlbmRDaGlsZChmaWdjYXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUnVuIGNhbGxiYWNrXHJcbiAgICAgICAgaWYob3B0aW9ucy5hc3luYyAmJiBjYWxsYmFjaylcclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJbWFnZVNyYyhpbWFnZSkge1xyXG4gICAgICAgIC8vIFNldCBkYWZ1bHQgaW1hZ2UgcGF0aCBmcm9tIGhyZWZcclxuICAgICAgICB2YXIgcmVzdWx0ID0gaW1hZ2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xyXG4gICAgICAgIC8vIElmIGRhdGFzZXQgaXMgc3VwcG9ydGVkIGZpbmQgdGhlIG1vc3Qgc3VpdGFibGUgaW1hZ2VcclxuICAgICAgICBpZihpbWFnZS5kYXRhc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBzcmNzID0gW107XHJcbiAgICAgICAgICAgIC8vIEdldCBhbGwgcG9zc2libGUgaW1hZ2UgdmVyc2lvbnMgZGVwZW5kaW5nIG9uIHRoZSByZXNvbHV0aW9uIFxyXG4gICAgICAgICAgICBmb3IodmFyIGl0ZW0gaW4gaW1hZ2UuZGF0YXNldCkge1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbS5zdWJzdHJpbmcoMCwgMykgPT09ICdhdC0nICYmICFpc05hTihpdGVtLnN1YnN0cmluZygzKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgc3Jjc1tpdGVtLnJlcGxhY2UoJ2F0LScsICcnKV0gPSBpbWFnZS5kYXRhc2V0W2l0ZW1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNvcnQgcmVzb2x1dGlvbnMgYXNjZW5kaW5nXHJcbiAgICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhzcmNzKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChhKSA8IHBhcnNlSW50KGIpID8gLTEgOiAxO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gR2V0IHJlYWwgc2NyZWVuIHJlc29sdXRpb24gXHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIC8vIEZpbmQgZmlyc3QgaW1hZ2UgYmlnZ2VyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGN1cnJlbnQgd2lkdGhcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKGtleXNbaV0gPj0gd2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzcmNzW2tleXNbaV1dOyAgICBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNyY3Nba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93TmV4dEltYWdlKCkge1xyXG4gICAgICAgIGlmKGN1cnJlbnRJbmRleCA8PSBpbWFnZXNBcnJheS5sZW5ndGggLSAyKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmRleCsrO1xyXG4gICAgICAgICAgICB1cGRhdGVPZmZzZXQoKTtcclxuICAgICAgICAgICAgcHJlbG9hZE5leHQoY3VycmVudEluZGV4KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzbGlkZXIuY2xhc3NOYW1lID0gJ2JvdW5jZS1mcm9tLXJpZ2h0JztcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlci5jbGFzc05hbWUgPSAnJztcclxuICAgICAgICAgICAgfSwgNDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1ByZXZpb3VzSW1hZ2UoKSB7XHJcbiAgICAgICAgaWYoY3VycmVudEluZGV4ID49IDEpIHtcclxuICAgICAgICAgICAgY3VycmVudEluZGV4LS07XHJcbiAgICAgICAgICAgIHVwZGF0ZU9mZnNldCgpO1xyXG4gICAgICAgICAgICBwcmVsb2FkUHJldihjdXJyZW50SW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5jbGFzc05hbWUgPSAnYm91bmNlLWZyb20tbGVmdCc7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXIuY2xhc3NOYW1lID0gJyc7XHJcbiAgICAgICAgICAgIH0sIDQwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU9mZnNldCgpIHtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gLWN1cnJlbnRJbmRleCAqIDEwMCArICclJztcclxuICAgICAgICBpZihvcHRpb25zLmFuaW1hdGlvbiA9PT0gJ2ZhZGVJbicpIHtcclxuICAgICAgICAgICAgc2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLypqc2hpbnQgLVcwMzAgKi9cclxuICAgICAgICAgICAgICAgIG9wdGlvbnMudHJhbnNmb3JtcyA/XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLnRyYW5zZm9ybSA9IHNsaWRlci5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoJyArIG9mZnNldCArICcsMCwwKSdcclxuICAgICAgICAgICAgICAgICAgICA6IHNsaWRlci5zdHlsZS5sZWZ0ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgICAgICB9LCA0MDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qanNoaW50IC1XMDMwICovXHJcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNmb3JtcyA/XHJcbiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gc2xpZGVyLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgb2Zmc2V0ICsgJywwLDApJ1xyXG4gICAgICAgICAgICAgICAgOiBzbGlkZXIuc3R5bGUubGVmdCA9IG9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGVzdFRyYW5zZm9ybXNTdXBwb3J0KCkge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgc3VwcG9ydCA9IGZhbHNlO1xyXG4gICAgICAgIHN1cHBvcnQgPSB0eXBlb2YgZGl2LnN0eWxlLnBlcnNwZWN0aXZlICE9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgZGl2LnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlICE9PSAndW5kZWZpbmVkJztcclxuICAgICAgICByZXR1cm4gc3VwcG9ydDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcmVsb2FkTmV4dChpbmRleCkge1xyXG4gICAgICAgIGlmKGluZGV4IC0gY3VycmVudEluZGV4ID49IG9wdGlvbnMucHJlbG9hZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGxvYWRJbWFnZShpbmRleCArIDEsIGZ1bmN0aW9uKCkgeyBwcmVsb2FkTmV4dChpbmRleCArIDEpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcmVsb2FkUHJldihpbmRleCkge1xyXG4gICAgICAgIGlmKGN1cnJlbnRJbmRleCAtIGluZGV4ID49IG9wdGlvbnMucHJlbG9hZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGxvYWRJbWFnZShpbmRleCAtIDEsIGZ1bmN0aW9uKCkgeyBwcmVsb2FkUHJldihpbmRleCAtIDEpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcilcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjaywgZmFsc2UpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJ1bjogcnVuXHJcbiAgICB9O1xyXG5cclxufSkoKTsiXX0=
